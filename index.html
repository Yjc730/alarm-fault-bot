<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alarm-Fault 啟動頁</title>
<meta name="color-scheme" content="dark"/>
<meta name="theme-color" content="#0d0f1a"/>
<link rel="preload" as="fetch" href="alarm_fault_final_merged.json" crossorigin="anonymous">
<link rel="prefetch" href="alarm_fault_bot_chat_zh_v3_auto_map.html">

<style>
  :root{
    --bg1:#0d0f1a; --bg2:#11162a;
    --neon:#5aa0ff; --neon2:#7af3ff;
    --text:#e6eefc; --muted:#9bb0d3;
    --card: rgba(12,16,28,.55); --border: rgba(124,161,255,.25);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; overflow:hidden;
    font-family: ui-sans-serif,system-ui,-apple-system,"Noto Sans TC","Segoe UI",Roboto,Arial;
    color:var(--text);
    background:
      radial-gradient(1200px 1200px at 10% 10%, #17203a 0%, transparent 60%),
      radial-gradient(1400px 900px at 90% 90%, #0b1227 0%, transparent 60%),
      linear-gradient(135deg,var(--bg1),var(--bg2));
  }

  /* 背景特效 */
  canvas#stars{position:fixed; inset:0; z-index:0; opacity:.55}
  .rings{
    position:fixed; inset:-20vmax; pointer-events:none; z-index:0;
    filter: blur(30px) saturate(140%);
    background:
      conic-gradient(from 0deg at 60% 40%, transparent 0 40%, rgba(71,132,255,.18) 40% 44%, transparent 44% 100%),
      radial-gradient(60vmax 60vmax at 20% 30%, rgba(74,216,255,.12), transparent 60%),
      radial-gradient(50vmax 50vmax at 80% 70%, rgba(82,134,255,.10), transparent 60%);
    animation: spin 40s linear infinite;
    mix-blend-mode:screen;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  .blob{
    position:fixed; width:38vmax; height:38vmax; border-radius:50%;
    filter:blur(40px) saturate(130%);
    background:radial-gradient(circle at 30% 30%, rgba(90,160,255,.55), rgba(122,243,255,.15) 60%, transparent 70%);
    animation: float 18s ease-in-out infinite; z-index:0; mix-blend-mode:screen; opacity:.6
  }
  .blob.b2{
    left:60%; top:65%; width:30vmax; height:30vmax;
    background:radial-gradient(circle at 70% 60%, rgba(122,243,255,.45), rgba(90,160,255,.15) 60%, transparent 70%);
    animation-duration:22s; animation-delay:-6s;
  }
  @keyframes float{0%,100%{transform:translateY(-2%) translateX(0)} 50%{transform:translateY(4%) translateX(-2%)}}

  /* 版面 */
  .wrap{ position:relative; z-index:2; height:100%; display:grid; place-items:center; padding:24px; }
  .card{
    width:min(880px,92vw); padding:34px 28px; border-radius:20px;
    background: var(--card); border:1px solid var(--border); backdrop-filter: blur(14px);
    box-shadow: 0 20px 60px rgba(0,0,0,.45), inset 0 0 1px rgba(255,255,255,.12);
    opacity:0; transform:translateY(14px); animation:enter .8s ease forwards .15s;
  }
  @keyframes enter{to{opacity:1; transform:none}}

  /* 標題霓虹流光 */
  .title{
    font-size:clamp(28px,4.2vw,40px); font-weight:900; letter-spacing:.3px; line-height:1.2;
    background: linear-gradient(90deg, #eaf3ff 0%, #bcd5ff 10%, #7af3ff 30%, #5aa0ff 60%, #eaf3ff 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow: 0 0 18px rgba(90,160,255,.25);
    background-size:200% auto; animation:shine 6s linear infinite;
  }
  @keyframes shine{to{background-position:200% center}}

  .subtitle{ color:var(--muted); margin-top:8px; line-height:1.65; font-size:clamp(14px,2.2vw,16px); }

  /* 標籤 */
  .badges{ display:flex; gap:10px; margin:16px 0 24px; flex-wrap:wrap;}
  .tag{
    font-size:12px; color:#cfe0ff; border:1px solid rgba(122,243,255,.35);
    padding:6px 10px; border-radius:999px;
    background: linear-gradient(180deg, rgba(14,25,50,.7), rgba(11,18,36,.3));
    backdrop-filter: blur(10px);
  }

  /* CTA */
  .cta{ display:flex; gap:12px; margin-top:18px; flex-wrap:wrap }
  .btn{
    position:relative; border:none; cursor:pointer; border-radius:12px; font-size:16px; padding:12px 22px;
    color:#00122e; background:linear-gradient(180deg, #7af3ff, #5aa0ff); font-weight:800; letter-spacing:.3px;
    box-shadow: 0 10px 26px rgba(90,160,255,.35), 0 0 0 1px rgba(122,243,255,.45) inset;
    transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    overflow:hidden;
  }
  .btn:hover{ transform: translateY(-1px) scale(1.02); filter:saturate(115%); }
  .btn:active{ transform: translateY(0) scale(.98); }
  .btn::after{
    content:""; position:absolute; top:0; left:-120%; width:100%; height:100%;
    background:linear-gradient(120deg,transparent,rgba(255,255,255,.35),transparent);
    transition:.8s; pointer-events:none;
  }
  .btn:hover::after{ left:120%; }

  /* 列表與底部 */
  .list{ margin-top:12px; color:#cbd7f5; font-size:14px; line-height:1.7; }
  .list p{ margin:.3rem 0 }
  footer{ position:absolute; bottom:18px; width:100%; text-align:center; color:#93a8cf; font-size:12px; z-index:2 }
  a.link{ color:#b8d3ff; text-decoration:none; border-bottom:1px dashed rgba(124,161,255,.5) }
  a.link:hover{ color:white }
</style>
</head>
<body>
  <!-- 背景 -->
  <canvas id="stars"></canvas>
  <div class="rings"></div>
  <div class="blob"></div>
  <div class="blob b2"></div>

  <!-- 內容 -->
  <div class="wrap">
    <section class="card" role="main" aria-label="Alarm-Fault 啟動面板">
      <div class="title">⚡ Alarm-Fault 對話機器人</div>
      <div class="subtitle">零幻覺。輸入基地台 <b>ID</b> 或關鍵字，立即獲得中文解釋與建議處置。</div>

      <div class="badges">
        <div class="tag">JSON 本地查詢</div>
        <div class="tag">中文解釋</div>
        <div class="tag">建議處置</div>
        <div class="tag">手機可用</div>
        <div class="tag">GitHub Pages</div>
      </div>

      <div class="cta">
        <button class="btn" id="start" aria-label="開始使用">開始使用</button>
      </div>

      <div class="list" id="meta">
        <p id="datasrc">資料來源：<code>alarm_fault_final_merged.json</code>（讀取中…）</p>
      </div>
    </section>
  </div>

  <footer>
    © 2025 Alarm-Fault Bot • <a class="link" href="#" id="gh">GitHub Repo</a>
  </footer>

<script>
  // === 路徑設定 ===
  const CHAT_PAGE = "alarm_fault_bot_chat_zh_v3_auto_map.html";
  const REPO_URL  = location.origin + location.pathname; // 開 repo 首頁

  document.getElementById("start").onclick = () => location.href = CHAT_PAGE;
  document.getElementById("gh").onclick    = (e) => { e.preventDefault(); window.open(REPO_URL, "_blank"); };
  // Enter 直接開始
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') document.getElementById('start').click(); });

  // === 動態顯示 JSON 筆數 ===
  (async function showCounts(){
    const el = document.getElementById('datasrc');
    try{
      const r = await fetch('alarm_fault_final_merged.json', { cache:'no-store' });
      if(!r.ok) throw new Error(r.status);
      const j = await r.json();
      const map = Array.isArray(j.alarm_fault_map) ? j.alarm_fault_map.length : 0;
      const al  = Array.isArray(j.alarm_list) ? j.alarm_list.length : 0;
      const fl  = Array.isArray(j.fault_list) ? j.fault_list.length : 0;
      const sum = map + al + fl || 0;
      el.innerHTML = `資料來源：<code>alarm_fault_final_merged.json</code>（共 <b>${sum}</b> 筆，map：${map}、alarm：${al}、fault：${fl}）。`;
    }catch(e){
      el.innerHTML = `資料來源：<code>alarm_fault_final_merged.json</code>（無法讀取；請確認檔名/同資料夾/大小寫一致）。`;
      console.warn('count fail', e);
    }
  })();

  // === 背景星點 ===
  const c = document.getElementById('stars');
  const ctx = c.getContext('2d');
  let w,h,particles;
  function reset(){
    w = c.width = window.innerWidth;
    h = c.height = window.innerHeight;
    const count = Math.min(150, Math.floor(w*h/15000));
    particles = Array.from({length:count}, ()=> ({
      x: Math.random()*w,
      y: Math.random()*h,
      r: Math.random()*1.4 + .4,
      vx: (Math.random()-.5)*.3,
      vy: (Math.random()-.5)*.3,
      a: Math.random()*1
    }));
  }
  window.addEventListener('resize', reset);
  reset();
  (function draw(){
    ctx.clearRect(0,0,w,h);
    for(const p of particles){
      p.x += p.vx; p.y += p.vy; p.a += 0.003;
      if(p.x<0||p.x>w) p.vx*=-1;
      if(p.y<0||p.y>h) p.vy*=-1;
      const glow = (Math.sin(p.a)+1)/2;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      const g = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*6);
      g.addColorStop(0, `rgba(122,243,255,${0.9*glow})`);
      g.addColorStop(1, 'rgba(122,243,255,0)');
      ctx.fillStyle = g;
      ctx.fill();
    }
    requestAnimationFrame(draw);
  })();
</script>

<!-- 背景環形光暈 -->
<div class="rings" aria-hidden="true"></div>
<div class="blob"  style="left:8%; top:8%;" aria-hidden="true"></div>
<div class="blob b2" aria-hidden="true"></div>
</body>
</html>
